// Sass.
@use 'sass:list';

// Functions.
@use '../list.empty.function' as *;
@use '../list.first.function' as *;
@use 'get.type.function';

// Status: DONE
// The `list.number()` function returns any, first or last occurring number, or all occurred numbers, also the specified numbers, otherwise null.
// @param `$list` A list from which the occurring numbers are retrieved.
// @param `$occurrence` All, any, first or last occurrence of the retrieved numbers from the given `$list`.
// @param `$value` The value to retrieve from the given `$list`.
// @param `$values...` The list of values to retrieve from the given `$list`.
// @return The return value is a retrieved number, list of numbers or `null`.
@function number($list, $occurrence: first, $value: null, $values...) {
  $result: first(get.type($list, $occurrence, number));
  $values-result: ();
  @each $value in list.join($value, $values, comma) {
    $values-result: list.append($values-result, if(list.index($result, $value), $value, null), list.separator($list));
  }
  @return if($value, if(empty($values-result), null, if(list.length($values-result) == 1, first($values-result), $values-result)), $result);
}

// Examples.
// occurrence: first by default
// @debug number(('a', 'b', 'c', 2)); // `2`
// @debug number(('a', 'b', 'c', 2), first); // `2`

// occurrence: any
// @debug number(('a', 'b', 'c', (3))); // `3`
// @debug number(('a', 'b', 'c', (4, ))); // `null`
// @debug number(('a', 'b', 'c', ('5', (6,)))); // `null`

// occurrence: last
// @debug number(('a', 5, 'b', 2, 'c', (4, ))); // 5

// occurrence: all
// @debug number((3, 'a', 0, 'b', 1, 'c', 2), all); // 3, 0, 1, 2
// @debug number(('a', 5, 'b', 2, 'c', (4, )), all); // 5, 2

// occurrence: all + value
// @debug number(('a', 3, 'b', 2, 4, 2, 7, 2, 'b', 'c', 2), all, 15); // null
// @debug number(('a', 3, 'b', 2, 4, 8, 2, 7, 2, 'b', 'c', 2), all, 8); // 8
// @debug number(('a', 3, 'b', 2, 4, 8, 2, 7, 2, 'b', 'c', 2), first, 8); // null
// @debug number(('a', 3, 'b', 2, 4, 8, 2, 7, 2, 'b', 'c', 2), last, 8); // null

// occurrence: all + values
// @debug number(('a', 3, 'b', 2, 4, 8, 2, 7, 2, 'b', 'c', 2), all, 8, 15, 7, 2); // 8, null, 7, 2

// specified value TODO: ?
// @debug number((3, 'a', 0, 'b', 1, 'c', 2), all '>' 2...); // 3
// @debug number((3, 'a', 0, 'b', 1, 'c', 2), all '>' 1...); // 3, 2
// @debug number(('3', 'a', '0', 'b', '1', 'c', '2'), last '==' 2...); // null
